@model DSUGrupp1.Models.ViewModels.ChartViewModel


@{
    ViewData["Title"] = "Home Page";
}

@section LeftContent {
    @await Component.InvokeAsync("Chart","1")
}

@section RightContent {
    <!--@using (Html.BeginForm("PopulateDeSoDropDown", "home"))
    {
        @Html.DropDownListFor(d => d.DeSoDropDown.SelectedDeso, Model.DeSoDropDown.DeSos, "Välj ett område")
        @await Component.InvokeAsync("Chart", "3")
    }
    -->
    @Html.DropDownListFor(d => d.DeSoDropDown.SelectedDeso, Model.DeSoDropDown.DeSos, "Välj ett område", new{@id = "deSo-dropdown"})
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const deSoDropdown = document.getElementById('deSo-dropdown');

            deSoDropdown.addEventListener('change', function () {
                let selectedDeSo = this.value;
                console.log(selectedDeSo);

                fetch('/HomeController/GetChartFromDeSoCode?selectedDeSo=${selectedDeSo}')
                    .then(response => response.text())
                    .then(html => {
                        this.innerHTML = html;
                    });
            });
        });
    </script>

    
    
}

@section CenterContent {
    @await Component.InvokeAsync("Chart", "2")
}




